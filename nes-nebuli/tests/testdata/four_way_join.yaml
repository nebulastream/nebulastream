query: |
  SELECT * FROM (SELECT * FROM stream)
  INNER JOIN (SELECT * FROM stream2) ON id = id2 WINDOW TUMBLING (timestamp, size 1 sec)
  INNER JOIN (SELECT * FROM stream4) ON id = id4 WINDOW TUMBLING (timestamp, size 1 sec)
  INNER JOIN (SELECT * FROM stream4_1) ON id = id4_1 WINDOW TUMBLING (timestamp, size 1 sec)
  INTO sinkStreamStream2Stream4Stream4_1;

sinks:
  - name: sinkStreamStream2Stream4Stream4_1
    type: Print
    schema:
      - name: streamstream2stream4stream4_1$start
        type: UINT64
      - name: streamstream2stream4stream4_1$end
        type: UINT64
      - name: streamstream2stream4$start
        type: UINT64
      - name: streamstream2stream4$end
        type: UINT64
      - name: streamstream2$start
        type: UINT64
      - name: streamstream2$end
        type: UINT64
      - name: stream$id
        type: UINT64
      - name: stream$value
        type: UINT64
      - name: stream$timestamp
        type: UINT64
      - name: stream2$id2
        type: UINT64
      - name: stream2$value2
        type: UINT64
      - name: stream2$timestamp
        type: UINT64
      - name: stream4$id4
        type: UINT64
      - name: stream4$value4
        type: UINT64
      - name: stream4$timestamp
        type: UINT64
      - name: stream4_1$id4_1
        type: UINT64
      - name: stream4_1$value4_1
        type: UINT64
      - name: stream4_1$timestamp
        type: UINT64
    host: host2
    config:
      input_format: CSV

logical:
  - name: stream
    schema:
      - name: id
        type: UINT64
      - name: value
        type: UINT64
      - name: timestamp
        type: UINT64
  - name: stream2
    schema:
      - name: id2
        type: UINT64
      - name: value2
        type: UINT64
      - name: timestamp
        type: UINT64
  - name: stream4
    schema:
      - name: id4
        type: UINT64
      - name: value4
        type: UINT64
      - name: timestamp
        type: UINT64
  - name: stream4_1
    schema:
      - name: id4_1
        type: UINT64
      - name: value4_1
        type: UINT64
      - name: timestamp
        type: UINT64

physical:
  - logical: stream
    type: File
    host: host1
    parser_config:
      type: CSV
    source_config:
      file_path: "[MOCKED]"
  - logical: stream2
    type: File
    host: host1
    parser_config:
      type: CSV
    source_config:
      file_path: "[MOCKED]"
  - logical: stream4
    type: File
    host: host1
    parser_config:
      type: CSV
    source_config:
      file_path: "[MOCKED]"
  - logical: stream4_1
    type: File
    host: host1
    parser_config:
      type: CSV
    source_config:
      file_path: "[MOCKED]"

workers:
  - host: host1
    grpc: grpc1
    capacity: 5
    downstream:
      - host2
  - host: host2
    grpc: grpc2
    capacity: 255
