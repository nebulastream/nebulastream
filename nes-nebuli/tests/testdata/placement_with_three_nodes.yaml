query: |
  SELECT * FROM (SELECT ts, a, id0 FROM stream0 WHERE a != b) INNER JOIN (SELECT * FROM stream1 WHERE c < d) ON id0 = id1 WINDOW TUMBLING (ts, size 1 sec) INTO sink

sinks:
  - name: sink
    type: Print
    schema:
      - name: stream0stream1$start
        dataType: UINT64
      - name: stream0stream1$end
        dataType: UINT64
      - name: stream0$ts
        dataType: UINT64
      - name: stream0$a
        dataType: INT32
      - name: stream0$id0
        dataType: INT32
      - name: stream1$ts
        dataType: UINT64
      - name: stream1$id1
        dataType: INT32
      - name: stream1$c
        dataType: INT32
      - name: stream1$d
        dataType: INT32
    host: "sink-node-host"
    config:
      inputFormat: CSV

logicalSources:
  - name: stream0
    schema:
      - name: ts
        dataType: UINT64
      - name: id0
        dataType: INT32
      - name: a
        dataType: INT32
      - name: b
        dataType: INT32
  - name: stream1
    schema:
      - name: ts
        dataType: UINT64
      - name: id1
        dataType: INT32
      - name: c
        dataType: INT32
      - name: d
        dataType: INT32

physicalSources:
  - logicalSource: stream0
    type: File
    host: "source-node0-host"
    parserConfig:
      type: CSV
    sourceConfig:
      filePath: "[MOCKED]"
  - logicalSource: stream1
    type: File
    host: "source-node1-host"
    parserConfig:
      type: CSV
    sourceConfig:
      filePath: "[MOCKED]"

workerNodes:
  - host: "sink-node-host"
    grpc: "sink-node"
    capacity: 10
  - host: "source-node0-host"
    grpc: "source-node0"
    capacity: 4
    downstreamNodes:
      - "sink-node-host"
  - host: "source-node1-host"
    grpc: "source-node1"
    capacity: 3
    downstreamNodes:
      - "sink-node-host"
