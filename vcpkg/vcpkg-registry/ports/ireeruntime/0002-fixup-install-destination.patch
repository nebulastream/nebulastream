Subject: [PATCH] 0002-fixup-install-destination
---
Index: build_tools/cmake/iree_install_support.cmake
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/build_tools/cmake/iree_install_support.cmake b/build_tools/cmake/iree_install_support.cmake
--- a/build_tools/cmake/iree_install_support.cmake	(revision 1a6681936a78138f7ae2b0fd9309d28dfe01ac5b)
+++ b/build_tools/cmake/iree_install_support.cmake	(date 1764841474082)
@@ -4,6 +4,7 @@
 # See https://llvm.org/LICENSE.txt for license information.
 # SPDX-License-Identifier: Apache-2.0 WITH LLVM-exception
 
+include(GNUInstallDirs)
 function(iree_add_alias_library to_target from_target)
   add_library(${to_target} ALIAS ${from_target})
   # Yes: Leading-lowercase property names are load bearing and the recommended
@@ -64,10 +65,10 @@
     EXPORT IREEExported-${_EXPORT_SET}
     COMPONENT "${_INSTALL_COMPONENT}"
     EXCLUDE_FROM_ALL
-    LIBRARY DESTINATION ${CMAKE_INSTALL_LIBDIR}
-    ARCHIVE DESTINATION ${CMAKE_INSTALL_LIBDIR}
-    RUNTIME DESTINATION ${CMAKE_INSTALL_BINDIR}
-    INCLUDES DESTINATION ${CMAKE_INSTALL_INCLUDEDIR}
+    LIBRARY DESTINATION ${CMAKE_INSTALL_PREFIX}/${CMAKE_INSTALL_LIBDIR}
+    ARCHIVE DESTINATION ${CMAKE_INSTALL_PREFIX}/${CMAKE_INSTALL_LIBDIR}
+    RUNTIME DESTINATION ${CMAKE_INSTALL_PREFIX}/${CMAKE_INSTALL_BINDIR}
+    INCLUDES DESTINATION ${CMAKE_INSTALL_PREFIX}/${CMAKE_INSTALL_INCLUDEDIR}
   )
 
   # Install headers if the rule declares them and the directory level
@@ -140,7 +141,7 @@
     EXPORT "IREEExported-${_RULE_EXPORT_SET}"
     COMPONENT "${_component}"
     FILE "IREETargets-${_RULE_EXPORT_SET}.cmake"
-    DESTINATION "${_RULE_INSTALL_DESTINATION}"
+    DESTINATION "${CMAKE_INSTALL_PREFIX}"
   )
 
   # Clear the export targets so that innocent aggregating projects don't
