#  SELECT user_id, page_id, campaign_id FROM tcp_source INTO csv_sink
query: |
  SELECT mlife_FallNr FROM odbc_source INTO csv_sink
logical:
  - name: odbc_source
    schema:
      - name: mlife_FallNr
        type: INT32
physical:
  - logical: odbc_source
    type: ODBC
    parser_config:
      type: Native
    source_config:
      host: "localhost"
      port: "1433"
      database: "master"
      username: "sa"
      password: "samplePassword1!"
      driver: "ODBC Driver 18 for SQL Server"
      # Todo: this can get out of sync with NES query above (which might be intentional, but is error-prone)
      query: "SELECT mlife_FallNr FROM dbo.v_Vitalwerte_unvalidiert"
      trust_server_certificate: true

sinks:
  - name: csv_SiNk
    schema:
      - name: odbc_source$mlife_FallNr
        type: INT32
    type: File
    config:
      file_path: "/home/rudi/dima/nebulastream-public/nes-plugins/Sources/ODBCSource/tests/output.csv"
      input_format: "CSV"
