# name: window/synopsis/WindowAggregationSamples.test
# description: Test different sampling types
# groups: [Synopsis, Aggregation, WindowOperators]

# Source definitions
Source stream UINT64 id UINT64 value UINT64 timestamp INLINE
1,1,1000
12,1,1001
4,1,1002
1,2,2000
11,2,2001
16,2,2002
1,3,3000
11,3,3001
1,3,3003
1,3,3200
1,4,4000
1,5,5000
1,6,6000
1,7,7000
1,8,8000
1,9,9000
1,10,10000
1,11,11000
1,12,12000
1,13,13000
1,14,14000
1,15,15000
1,16,16000
1,17,17000
1,18,18000
1,19,19000
1,20,20000
1,21,21000

SINK sinkStream UINT64 stream$start UINT64 stream$end UINT64 stream$id UINT64 stream$value UINT64 stream$timestamp

# Simple reservoir sample
SELECT RESERVOIR(5) FROM stream GROUP BY id WINDOW TUMBLING(timestamp, size 5 sec) INTO sinkStream;
----
0 5000 1 3 3200
0 5000 1 3 3003
0 5000 1 1 1000
0 5000 1 2 2000
0 5000 1 4 4000
0 5000 11 3 3001
0 5000 11 2 2001
0 5000 12 1 1001
0 5000 16 2 2002
0 5000 4 1 1002
10000 15000 1 14 14000
10000 15000 1 13 13000
10000 15000 1 12 12000
10000 15000 1 10 10000
10000 15000 1 11 11000
15000 20000 1 16 16000
15000 20000 1 15 15000
15000 20000 1 17 17000
15000 20000 1 18 18000
15000 20000 1 19 19000
20000 25000 1 20 20000
20000 25000 1 21 21000
5000 10000 1 9 9000
5000 10000 1 8 8000
5000 10000 1 7 7000
5000 10000 1 6 6000
5000 10000 1 5 5000
