# name: inference/experiments.test
# description: Iris dataset experiments
# groups: [Inference]

Source streamFloat FLOAT32 p1 FLOAT32 p2 FLOAT32 p3 FLOAT32 p4 FILE
TESTDATA/small/iris.csv

Source generatorIris UINT64 id FLOAT32 p1 FLOAT32 p2 FLOAT32 p3 FLOAT32 p4 GENERATOR
CONFIG/sources/generator_iris.yaml

SINK classificationThreeSeparate FLOAT32 setosa FLOAT32 versicolor FLOAT32 virginica

MODEL iris32 TESTDATA/model/model.onnx
FLOAT32 FLOAT32 FLOAT32 FLOAT32
FLOAT32 setosa FLOAT32 versicolor FLOAT32 virginica
BATCH_SIZE 32

SELECT setosa, versicolor, virginica
FROM (SELECT INFER_MODEL(iris32, (p1,p2,p3,p4)) FROM generatorIris)
INTO CHECKSUM
----
10000000,12690002022

MODEL iris64 TESTDATA/model/model.onnx
FLOAT32 FLOAT32 FLOAT32 FLOAT32
FLOAT32 setosa FLOAT32 versicolor FLOAT32 virginica
BATCH_SIZE 64

SELECT setosa, versicolor, virginica
FROM (SELECT INFER_MODEL(iris64, (p1,p2,p3,p4)) FROM generatorIris)
INTO CHECKSUM
----
10000000,12690002022

MODEL iris128 TESTDATA/model/model.onnx
FLOAT32 FLOAT32 FLOAT32 FLOAT32
FLOAT32 setosa FLOAT32 versicolor FLOAT32 virginica
BATCH_SIZE 128

SELECT setosa, versicolor, virginica
FROM (SELECT INFER_MODEL(iris128, (p1,p2,p3,p4)) FROM generatorIris)
INTO CHECKSUM
----
10000000,12690002022

MODEL iris256 TESTDATA/model/model.onnx
FLOAT32 FLOAT32 FLOAT32 FLOAT32
FLOAT32 setosa FLOAT32 versicolor FLOAT32 virginica
BATCH_SIZE 256

SELECT setosa, versicolor, virginica
FROM (SELECT INFER_MODEL(iris256, (p1,p2,p3,p4)) FROM generatorIris)
INTO CHECKSUM
----
10000000,12690002022

MODEL iris512 TESTDATA/model/model.onnx
FLOAT32 FLOAT32 FLOAT32 FLOAT32
FLOAT32 setosa FLOAT32 versicolor FLOAT32 virginica
BATCH_SIZE 512

SELECT setosa, versicolor, virginica
FROM (SELECT INFER_MODEL(iris512, (p1,p2,p3,p4)) FROM generatorIris)
INTO CHECKSUM
----
10000000,12690002022

MODEL iris1024 TESTDATA/model/model.onnx
FLOAT32 FLOAT32 FLOAT32 FLOAT32
FLOAT32 setosa FLOAT32 versicolor FLOAT32 virginica
BATCH_SIZE 1024

SELECT setosa, versicolor, virginica
FROM (SELECT INFER_MODEL(iris1024, (p1,p2,p3,p4)) FROM generatorIris)
INTO CHECKSUM
----
10000000,12690002022

MODEL iris2048 TESTDATA/model/model.onnx
FLOAT32 FLOAT32 FLOAT32 FLOAT32
FLOAT32 setosa FLOAT32 versicolor FLOAT32 virginica
BATCH_SIZE 2048

SELECT setosa, versicolor, virginica
FROM (SELECT INFER_MODEL(iris2048, (p1,p2,p3,p4)) FROM generatorIris)
INTO CHECKSUM
----
10000000,12690002022

MODEL iris4096 TESTDATA/model/model.onnx
FLOAT32 FLOAT32 FLOAT32 FLOAT32
FLOAT32 setosa FLOAT32 versicolor FLOAT32 virginica
BATCH_SIZE 4096

SELECT setosa, versicolor, virginica
FROM (SELECT INFER_MODEL(iris4096, (p1,p2,p3,p4)) FROM generatorIris)
INTO CHECKSUM
----
10000000,12690002022

MODEL iris8192 TESTDATA/model/model.onnx
FLOAT32 FLOAT32 FLOAT32 FLOAT32
FLOAT32 setosa FLOAT32 versicolor FLOAT32 virginica
BATCH_SIZE 8192

SELECT setosa, versicolor, virginica
FROM (SELECT INFER_MODEL(iris8192, (p1,p2,p3,p4)) FROM generatorIris)
INTO CHECKSUM
----
10000000,12690002022

MODEL iris16384 TESTDATA/model/model.onnx
FLOAT32 FLOAT32 FLOAT32 FLOAT32
FLOAT32 setosa FLOAT32 versicolor FLOAT32 virginica
BATCH_SIZE 16384

SELECT setosa, versicolor, virginica
FROM (SELECT INFER_MODEL(iris16384, (p1,p2,p3,p4)) FROM generatorIris)
INTO CHECKSUM
----
10000000,12690002022

MODEL iris32768 TESTDATA/model/model.onnx
FLOAT32 FLOAT32 FLOAT32 FLOAT32
FLOAT32 setosa FLOAT32 versicolor FLOAT32 virginica
BATCH_SIZE 32768

SELECT setosa, versicolor, virginica
FROM (SELECT INFER_MODEL(iris32768, (p1,p2,p3,p4)) FROM generatorIris)
INTO CHECKSUM
----
10000000,12690002022

MODEL iris65536 TESTDATA/model/model.onnx
FLOAT32 FLOAT32 FLOAT32 FLOAT32
FLOAT32 setosa FLOAT32 versicolor FLOAT32 virginica
BATCH_SIZE 65536

SELECT setosa, versicolor, virginica
FROM (SELECT INFER_MODEL(iris65536, (p1,p2,p3,p4)) FROM generatorIris)
INTO CHECKSUM
----
10000000,12690002022

MODEL iris131072 TESTDATA/model/model.onnx
FLOAT32 FLOAT32 FLOAT32 FLOAT32
FLOAT32 setosa FLOAT32 versicolor FLOAT32 virginica
BATCH_SIZE 131072

SELECT setosa, versicolor, virginica
FROM (SELECT INFER_MODEL(iris131072, (p1,p2,p3,p4)) FROM generatorIris)
INTO CHECKSUM
----
10000000,12690002022

MODEL iris174762 TESTDATA/model/model.onnx
FLOAT32 FLOAT32 FLOAT32 FLOAT32
FLOAT32 setosa FLOAT32 versicolor FLOAT32 virginica
BATCH_SIZE 174762

SELECT setosa, versicolor, virginica
FROM (SELECT INFER_MODEL(iris174762, (p1,p2,p3,p4)) FROM generatorIris)
INTO CHECKSUM
----
10000000,12690002022
